(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{494:function(t,a,s){"use strict";s.r(a);var n=s(38),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"基于vue3封装布局组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基于vue3封装布局组件"}},[t._v("#")]),t._v(" 基于Vue3封装布局组件")]),t._v(" "),a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),a("p",[t._v("由于目前业务需求中存在很多图表+表格等类型的页面，传统开发中需要一个一个组件的写好，再手动调整css，既耗费了时间又不能统一的控制加载、联动等逻辑。")]),t._v(" "),a("p",[t._v("本布局组件既是解决以上问题而诞生的。")]),t._v(" "),a("h2",{attrs:{id:"支持的功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的功能"}},[t._v("#")]),t._v(" 支持的功能")]),t._v(" "),a("p",[t._v("由于项目是基于"),a("code",[t._v("IDux")]),t._v("组件库开发的，所以这里会使用其中的一些组件来实现")]),t._v(" "),a("h3",{attrs:{id:"布局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#布局"}},[t._v("#")]),t._v(" 布局")]),t._v(" "),a("p",[t._v("通过"),a("code",[t._v("IxRow")]),t._v("及"),a("code",[t._v("IxCol")]),t._v("实现子组件的行列布局，通过简单的配置即可实现页面的自适应布局。")]),t._v(" "),a("p",[t._v("同时，每行每列都内置了"),a("code",[t._v("IxsTitleContainer")]),t._v("组件，可方便的实现标题的显示。")]),t._v(" "),a("h3",{attrs:{id:"注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册"}},[t._v("#")]),t._v(" 注册")]),t._v(" "),a("p",[t._v("通过以下简单的配置，对每列配置好key，就会将子组件注册到布局组件中，后续可统一控制事件。")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rows"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LayoutRow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    flexHeight"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'200px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    cols"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'box1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        flexWidth"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'340px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        titleContainerProps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'网络趋势'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        componentProps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'box2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        titleContainerProps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'网络流向'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        componentProps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"行超出滚动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#行超出滚动"}},[t._v("#")]),t._v(" 行超出滚动")]),t._v(" "),a("p",[t._v("存在一行中有多个图表，超出了屏幕的场景。")]),t._v(" "),a("p",[t._v("布局组件内置了"),a("code",[t._v("IxsRotations")]),t._v("组件，开启即可自动在超出时显示切换按钮，轻松实现切换效果。")]),t._v(" "),a("h3",{attrs:{id:"图表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图表"}},[t._v("#")]),t._v(" 图表")]),t._v(" "),a("p",[t._v("由于页面存在很多图表，一个个单独写"),a("code",[t._v("vue")]),t._v("文件代码很麻烦。")]),t._v(" "),a("p",[t._v("布局组件内置了"),a("code",[t._v("IxsCharts")]),t._v("组件，在配置中不传组件的话就会自动使用内置图表组件，通过简单的配置图表数据转换即可将图表显示出来。")]),t._v(" "),a("h3",{attrs:{id:"监听容器resize事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监听容器resize事件"}},[t._v("#")]),t._v(" 监听容器resize事件")]),t._v(" "),a("p",[t._v("当页面尺寸发生变化时，会自动触发子组件注册的resize方法，更新组件样式。")]),t._v(" "),a("h3",{attrs:{id:"请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[t._v("#")]),t._v(" 请求")]),t._v(" "),a("p",[t._v("布局组件支持用户手动传入fetch进行数据请求，同时也支持只传一个"),a("code",[t._v("url")]),t._v("，即可自动根据配置的"),a("code",[t._v("key")]),t._v("生成每个子组件的"),a("code",[t._v("fetch")]),t._v("函数，在需要的时机调用并设置数据。")]),t._v(" "),a("p",[t._v("同时考虑到数据量大的场景，支持对请求进行分组，通过并发请求的形式优化加载速度。")]),t._v(" "),a("h3",{attrs:{id:"自定义工具栏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义工具栏"}},[t._v("#")]),t._v(" 自定义工具栏")]),t._v(" "),a("p",[t._v("内置了"),a("code",[t._v("IxsToolbar")]),t._v("，简单配置即可显示出工具栏，同时内置了自动刷新、时间选择器等工具栏。")]),t._v(" "),a("p",[t._v("工具栏还支持对子组件事件的统一处理")]),t._v(" "),a("h3",{attrs:{id:"loading效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loading效果"}},[t._v("#")]),t._v(" loading效果")]),t._v(" "),a("p",[t._v("由于loading是要在每个子组件的区域单独显示，所以布局组件内置了loading效果，只需要子组件向布局组件提供容器的"),a("code",[t._v("ref")]),t._v("即可自动显示loading效果。")]),t._v(" "),a("h3",{attrs:{id:"事件系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件系统"}},[t._v("#")]),t._v(" 事件系统")]),t._v(" "),a("p",[t._v("子组件及布局组件中存在相互联动，所以布局组件内置了一套事件系统，通过获取事件实例就可实现事件的监听及触发，轻松实现联动。")]),t._v(" "),a("h3",{attrs:{id:"与左树的联动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#与左树的联动"}},[t._v("#")]),t._v(" 与左树的联动")]),t._v(" "),a("p",[t._v("通常页面会存在左树，布局组件内部监听了左树选中值的变化，触发变化即会自动更新内部组件数据。")]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("通过支持以上功能，可以快速的开发页面。同时保证了开发的规范、事件的处理流向等。")]),t._v(" "),a("p",[t._v("目前已稳定支持多个项目，10+个页面的开发")])])}),[],!1,null,null,null);a.default=r.exports}}]);