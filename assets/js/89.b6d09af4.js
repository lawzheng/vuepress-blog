(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{498:function(t,_,r){"use strict";r.r(_);var a=r(38),v=Object(a.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"自动检测接口branch-id"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#自动检测接口branch-id"}},[t._v("#")]),t._v(" 自动检测接口branch_id")]),t._v(" "),_("p",[t._v("目前webui中心端，接口需传branch_id，但是很多时候会搞忘了传，导致出现问题，所以这里做了自动配置以及无配置告警提示，一次性解决缺少branch_id带来的问题。")]),t._v(" "),_("h2",{attrs:{id:"自动配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#自动配置"}},[t._v("#")]),t._v(" 自动配置")]),t._v(" "),_("p",[t._v("通常需要传递branch_id的接口都是在带左树的页面，所以对几种类型的左树统一做了封装，会将选中的值存入全局store中。")]),t._v(" "),_("p",[t._v("在axios请求拦截器中，判断store中存在且接口参数上没有、且接口不属于不需要传的名单当中，则会给接口带上branch_id。")]),t._v(" "),_("h2",{attrs:{id:"缺失告警"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缺失告警"}},[t._v("#")]),t._v(" 缺失告警")]),t._v(" "),_("p",[t._v("上面的自动配置，理论上解决完了Vue下的所有接口问题。")]),t._v(" "),_("p",[t._v("还存在嵌入ext页面的场景问题，通过加告警提示去检测branch_id。")]),t._v(" "),_("ol",[_("li",[_("p",[t._v("页面store中有branch_id，接口没传时")]),t._v(" "),_("p",[t._v("理论上只有左树是vue的，右侧内容嵌入ext的页面才会有这种场景。当出现时，会告警提示。")])]),t._v(" "),_("li",[_("p",[t._v("接口传的branch_id与store中不一致时")]),t._v(" "),_("p",[t._v("之前出现过ext的嵌入页面没拿到正确的branch_id，会给个默认'0'，导致请求错分支。")]),t._v(" "),_("p",[t._v("现在会将其与store中存的正确的值，进行比较，不一致时告警提示。")])]),t._v(" "),_("li",[_("p",[t._v("跳临时页面，没配置branch_id时")]),t._v(" "),_("p",[t._v("由于临时页面是否设置branch_id是一个非必填字段，所以在当前页没配置时告警提示。")])])])])}),[],!1,null,null,null);_.default=v.exports}}]);