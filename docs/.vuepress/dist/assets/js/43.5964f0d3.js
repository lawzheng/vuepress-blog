(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{422:function(a,v,_){"use strict";_.r(v);var t=_(44),s=Object(t.a)({},(function(){var a=this,v=a.$createElement,_=a._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[_("h1",{attrs:{id:"拓扑图创新"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#拓扑图创新"}},[a._v("#")]),a._v(" 拓扑图创新")]),a._v(" "),_("p",[a._v("随着业务的迅速发展，以前控制器中使用"),_("code",[a._v("D3.js")]),a._v("实现的拓扑图功能渐渐地不能满足需求：")]),a._v(" "),_("ol",[_("li",[a._v("代码组织混乱，各功能未有序解耦，维护困难。")]),a._v(" "),_("li",[a._v("未插件化，不能供多个项目使用。")]),a._v(" "),_("li",[_("code",[a._v("D3.js")]),a._v("使用"),_("code",[a._v("svg")]),a._v("来实现，在数据量大时需要生成数量庞大的"),_("code",[a._v("dom")]),a._v("结构。")])]),a._v(" "),_("p",[a._v("因此，拓扑图急需一次大的升级。")]),a._v(" "),_("h2",{attrs:{id:"插件选型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#插件选型"}},[a._v("#")]),a._v(" 插件选型")]),a._v(" "),_("p",[a._v("市面上有不少拓扑图插件，例如：")]),a._v(" "),_("h3",{attrs:{id:"_1-antv-g6"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-antv-g6"}},[a._v("#")]),a._v(" 1. AntV G6")]),a._v(" "),_("p",[a._v("简介：G6 是一个图可视化引擎。它提供了图的绘制、布局、分析、交互、动画等图可视化的基础能力。\n背景：蚂蚁金服 AntV、国产\n官网：https://antv.vision/zh\n示例：https://github.com/wenyuan/cceditor")]),a._v(" "),_("ul",[_("li",[a._v("优点\n"),_("ul",[_("li",[a._v("开源免费")]),a._v(" "),_("li",[a._v("上手简单，可扩展性强")]),a._v(" "),_("li",[a._v("功能丰富，支持各种自定义操作")]),a._v(" "),_("li",[a._v("由蚂蚁金服 AntV 团队开发，从维护性和生态圈角度考虑相对有保障")]),a._v(" "),_("li",[a._v("支持自动布局（早期借助 d3-force 实现，后期已经被内部支持）")])])]),a._v(" "),_("li",[a._v("缺点\n"),_("ul",[_("li",[a._v("有时候文档和版本会脱节（可以理解，问题不大）")])])]),a._v(" "),_("li",[a._v("建议\n"),_("ul",[_("li",[a._v("大厂团队开发维护，后期有保障，大小项目都可以使用")]),a._v(" "),_("li",[a._v("可以学习里面的一些编程思想和技巧")])])])]),a._v(" "),_("h3",{attrs:{id:"_2-d3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-d3"}},[a._v("#")]),a._v(" 2. D3")]),a._v(" "),_("p",[a._v("只提供画图能力，画什么需要自己实现。")]),a._v(" "),_("h3",{attrs:{id:"_3-echarts"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-echarts"}},[a._v("#")]),a._v(" 3. ECharts")]),a._v(" "),_("p",[a._v("简介：ECharts 关系图。\n背景：百度、国产\n官网：https://www.echartsjs.com/zh/index.html")]),a._v(" "),_("ul",[_("li",[a._v("优点\n"),_("ul",[_("li",[a._v("上手非常简单")]),a._v(" "),_("li",[a._v("文档齐全")])])]),a._v(" "),_("li",[a._v("缺点\n"),_("ul",[_("li",[a._v("扩展性弱（毕竟不是专做图编辑器的，关系图只是 ECharts 中的一项）")])])]),a._v(" "),_("li",[a._v("建议\n"),_("ul",[_("li",[a._v("可以用在定制化的需求中，不需要拖拉拽等功能")])])])]),a._v(" "),_("h3",{attrs:{id:"选型总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#选型总结"}},[a._v("#")]),a._v(" 选型总结")]),a._v(" "),_("p",[a._v("除了上面提到的，还有一些国内外个人开发的插件，但普遍存在维护无保障、文档不齐全等问题。")]),a._v(" "),_("p",[a._v("另外D3之前就在用，存在的问题上面也讲过了。")]),a._v(" "),_("p",[a._v("Echarts拓展性不强，无法适应多变的需求。")]),a._v(" "),_("p",[a._v("加上深信服已经有基于"),_("code",[a._v("G6.js")]),a._v("封装了插件，可以在其基础上快速实现功能，于是最终选定使用"),_("code",[a._v("G6")]),a._v("进行开发。")]),a._v(" "),_("h2",{attrs:{id:"功能实现"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#功能实现"}},[a._v("#")]),a._v(" 功能实现")]),a._v(" "),_("h3",{attrs:{id:"架构图"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#架构图"}},[a._v("#")]),a._v(" 架构图")]),a._v(" "),_("p",[_("img",{attrs:{src:"D:%5CUsers%5CUser%5CDesktop%5Cvuepress-blog%5Cdocs%5Cblog%5Cimages%5C%E6%8B%93%E6%89%91%E5%9B%BE%E6%9E%B6%E6%9E%84.png",alt:""}})]),a._v(" "),_("h3",{attrs:{id:"树形拓扑图"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#树形拓扑图"}},[a._v("#")]),a._v(" 树形拓扑图")]),a._v(" "),_("p",[a._v("项目的树形需求主要有几个难点：")]),a._v(" "),_("ol",[_("li",[a._v("需要不同父集的子集间能相互连接")]),a._v(" "),_("li",[a._v("存在不在树结构里的元素")]),a._v(" "),_("li",[a._v("存在域外拓扑，即树拓扑中存在子树拓扑")])]),a._v(" "),_("p",[_("code",[a._v("G6")]),a._v("原生支持的树形拓扑十分死板，只能展示单纯的树形结构。")]),a._v(" "),_("p",[a._v("本插件通过"),_("strong",[a._v("自定义数据结构，调用树形算法生成布局")]),a._v("，并转换成"),_("code",[a._v("G6")]),a._v("普通图的数据结构，来实现最大化地自定义效果，完美实现需求。")]),a._v(" "),_("h3",{attrs:{id:"自定义图形、事件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#自定义图形、事件"}},[a._v("#")]),a._v(" 自定义图形、事件")]),a._v(" "),_("p",[a._v("根据"),_("code",[a._v("G6")]),a._v("的自定义写法，按图形、事件、样式等分好文件夹进行编码。")]),a._v(" "),_("h4",{attrs:{id:"连线"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#连线"}},[a._v("#")]),a._v(" 连线")]),a._v(" "),_("p",[a._v("可根据传入数据，自动显示传输速率、繁忙度、连接方式等信息。")]),a._v(" "),_("h4",{attrs:{id:"网络设备"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#网络设备"}},[a._v("#")]),a._v(" 网络设备")]),a._v(" "),_("p",[a._v("根据数据，自动显示网络设备如：控制器、接入点、盒式交换机、框式交换机等。")]),a._v(" "),_("h4",{attrs:{id:"事件系统"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#事件系统"}},[a._v("#")]),a._v(" 事件系统")]),a._v(" "),_("p",[a._v("自定义了一系列事件，统一在图实例发送接收，方便外部使用。")]),a._v(" "),_("h3",{attrs:{id:"文档"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[a._v("#")]),a._v(" 文档")]),a._v(" "),_("p",[a._v("一个大型的项目，不能缺少了文档。")]),a._v(" "),_("p",[a._v("这里使用"),_("code",[a._v("VuePress")]),a._v("作为静态网站生成器，可快速实现预览编写的"),_("code",[a._v(".md")]),a._v("格式文档。")]),a._v(" "),_("h3",{attrs:{id:"国际化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#国际化"}},[a._v("#")]),a._v(" 国际化")]),a._v(" "),_("p",[a._v("可在初始化时拓扑图配置时传入语言类型来控制文字显示。")]),a._v(" "),_("h3",{attrs:{id:"mock数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#mock数据"}},[a._v("#")]),a._v(" mock数据")]),a._v(" "),_("p",[a._v("可配置化的生成指定层级、数量的假数据，方便测试及展示。")]),a._v(" "),_("h3",{attrs:{id:"内部工具"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内部工具"}},[a._v("#")]),a._v(" 内部工具")]),a._v(" "),_("h4",{attrs:{id:"自定义console"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#自定义console"}},[a._v("#")]),a._v(" 自定义console")]),a._v(" "),_("p",[a._v("可自定义console打印的样式")]),a._v(" "),_("h4",{attrs:{id:"math"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#math"}},[a._v("#")]),a._v(" math")]),a._v(" "),_("p",[a._v("内置了许多三角函数等数学公式，可方便的使用。")]),a._v(" "),_("h3",{attrs:{id:"拓展原型方法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#拓展原型方法"}},[a._v("#")]),a._v(" 拓展原型方法")]),a._v(" "),_("p",[a._v("对"),_("code",[a._v("G6.js")]),a._v("的原型方法进行拓展、补充。")]),a._v(" "),_("h4",{attrs:{id:"minimap"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#minimap"}},[a._v("#")]),a._v(" minimap")]),a._v(" "),_("p",[_("code",[a._v("G6")]),a._v("有提供两种缩略图，"),_("code",[a._v("minimap")]),a._v("和"),_("code",[a._v("imageMinimap")]),a._v("。")]),a._v(" "),_("p",[a._v("区别就是"),_("code",[a._v("minimap")]),a._v("是根据graph再用canvas画一次，而"),_("code",[a._v("imageminimap")]),a._v("是将我们自己给的图片显示出来（但是需要自己监听变化并给出图片）。")]),a._v(" "),_("p",[a._v("可想而知，在大量数据的情况下，双倍渲染canvas肯定消耗更大的性能。")]),a._v(" "),_("p",[a._v("本插件通过修改"),_("code",[a._v("imageminimap")]),a._v("，实现了自动监听graph变化，同时生成图片并渲染到缩略图上。")]),a._v(" "),_("h3",{attrs:{id:"打包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#打包"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),_("p",[a._v("使用"),_("code",[a._v("webpack5")]),a._v("进行打包")]),a._v(" "),_("h4",{attrs:{id:"开发环境"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[a._v("#")]),a._v(" 开发环境")]),a._v(" "),_("p",[a._v("已内置两套开发环境（普通html和vue）。")]),a._v(" "),_("p",[a._v("通过"),_("code",[a._v("npm run dev")]),a._v("即可启动开发环境，自动监听样例代码和拓扑图插件代码变化，热更新页面。")]),a._v(" "),_("h4",{attrs:{id:"生成环境"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#生成环境"}},[a._v("#")]),a._v(" 生成环境")]),a._v(" "),_("p",[a._v("通过"),_("code",[a._v("npm run build")]),a._v("将文件打包成umd格式，发布到内部npm上即可使用es模块化方式引入。")]),a._v(" "),_("p",[a._v("普通html项目可直接引入js文件。")]),a._v(" "),_("h2",{attrs:{id:"插件系统"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#插件系统"}},[a._v("#")]),a._v(" 插件系统")]),a._v(" "),_("p",[a._v("所有插件均配置化，可传入配置进行开关、重写。")]),a._v(" "),_("h3",{attrs:{id:"数据工具栏"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据工具栏"}},[a._v("#")]),a._v(" 数据工具栏")]),a._v(" "),_("h4",{attrs:{id:"刷新"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#刷新"}},[a._v("#")]),a._v(" 刷新")]),a._v(" "),_("p",[a._v("自定义数据刷新时间。")]),a._v(" "),_("h4",{attrs:{id:"选取方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#选取方式"}},[a._v("#")]),a._v(" 选取方式")]),a._v(" "),_("p",[a._v("切换单选和框选数据。")]),a._v(" "),_("h4",{attrs:{id:"撤销"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#撤销"}},[a._v("#")]),a._v(" 撤销")]),a._v(" "),_("p",[a._v("即上一步。")]),a._v(" "),_("h4",{attrs:{id:"导出"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#导出"}},[a._v("#")]),a._v(" 导出")]),a._v(" "),_("p",[a._v("将拓扑图以图片形式导出。")]),a._v(" "),_("h4",{attrs:{id:"搜索"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#搜索"}},[a._v("#")]),a._v(" 搜索")]),a._v(" "),_("p",[a._v("通过关键字搜索并高亮相关数据。")]),a._v(" "),_("h3",{attrs:{id:"视图工具栏"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#视图工具栏"}},[a._v("#")]),a._v(" 视图工具栏")]),a._v(" "),_("p",[a._v("对图进行放大、缩小、自适应、缩略图、全屏等操作。")]),a._v(" "),_("h3",{attrs:{id:"tooltip"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tooltip"}},[a._v("#")]),a._v(" tooltip")]),a._v(" "),_("p",[a._v("鼠标悬浮提示")]),a._v(" "),_("h3",{attrs:{id:"命令系统"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#命令系统"}},[a._v("#")]),a._v(" 命令系统")]),a._v(" "),_("p",[a._v("操作动作都写入命令系统，在html上添加命令名即可实现动作。")]),a._v(" "),_("p",[a._v("并可配置命令快捷键。")]),a._v(" "),_("h3",{attrs:{id:"图例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#图例"}},[a._v("#")]),a._v(" 图例")]),a._v(" "),_("p",[a._v("设备图片示例，可动态传入数据进行显示。")]),a._v(" "),_("h3",{attrs:{id:"右键菜单"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#右键菜单"}},[a._v("#")]),a._v(" 右键菜单")]),a._v(" "),_("p",[a._v("针对不同设备，显示不同菜单。")]),a._v(" "),_("h2",{attrs:{id:"扩展性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#扩展性"}},[a._v("#")]),a._v(" 扩展性")]),a._v(" "),_("p",[a._v("插件、设备样式等均已配置化，可传入数据进行重写，十分方便的完成换肤、拓展等自定义需求。")]),a._v(" "),_("h2",{attrs:{id:"兼容性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#兼容性"}},[a._v("#")]),a._v(" 兼容性")]),a._v(" "),_("p",[a._v("现代浏览器完美兼容。")]),a._v(" "),_("p",[a._v("ie10环境，内部使用polyfill兼容。")])])}),[],!1,null,null,null);v.default=s.exports}}]);