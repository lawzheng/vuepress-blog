<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>混合开发 | Lawz&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="罗政的个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.b7be68ba.js" as="script"><link rel="preload" href="/assets/js/2.dd75d9b8.js" as="script"><link rel="preload" href="/assets/js/56.60536a01.js" as="script"><link rel="prefetch" href="/assets/js/10.7bb9748a.js"><link rel="prefetch" href="/assets/js/11.a65f4ad1.js"><link rel="prefetch" href="/assets/js/12.de9ffd06.js"><link rel="prefetch" href="/assets/js/13.86c1bb8d.js"><link rel="prefetch" href="/assets/js/14.3e8b2910.js"><link rel="prefetch" href="/assets/js/15.d83d70e2.js"><link rel="prefetch" href="/assets/js/16.7a821cc3.js"><link rel="prefetch" href="/assets/js/17.e3cd2788.js"><link rel="prefetch" href="/assets/js/18.b498aab4.js"><link rel="prefetch" href="/assets/js/19.d15ea4f9.js"><link rel="prefetch" href="/assets/js/20.93bb3873.js"><link rel="prefetch" href="/assets/js/21.e8338346.js"><link rel="prefetch" href="/assets/js/22.506923a1.js"><link rel="prefetch" href="/assets/js/23.79eccb5a.js"><link rel="prefetch" href="/assets/js/24.0fb22294.js"><link rel="prefetch" href="/assets/js/25.57598536.js"><link rel="prefetch" href="/assets/js/26.60c355c5.js"><link rel="prefetch" href="/assets/js/27.f332e048.js"><link rel="prefetch" href="/assets/js/28.f015d2aa.js"><link rel="prefetch" href="/assets/js/29.6d2fff02.js"><link rel="prefetch" href="/assets/js/3.a0451ac5.js"><link rel="prefetch" href="/assets/js/30.10b38b1d.js"><link rel="prefetch" href="/assets/js/31.b957dca4.js"><link rel="prefetch" href="/assets/js/32.4663c2d0.js"><link rel="prefetch" href="/assets/js/33.baa65a1e.js"><link rel="prefetch" href="/assets/js/34.00d26dde.js"><link rel="prefetch" href="/assets/js/35.016759f5.js"><link rel="prefetch" href="/assets/js/36.28841415.js"><link rel="prefetch" href="/assets/js/37.c7920e87.js"><link rel="prefetch" href="/assets/js/38.23e342e6.js"><link rel="prefetch" href="/assets/js/39.52b9f093.js"><link rel="prefetch" href="/assets/js/4.e7c996f5.js"><link rel="prefetch" href="/assets/js/40.9d83fc28.js"><link rel="prefetch" href="/assets/js/41.31c42bee.js"><link rel="prefetch" href="/assets/js/42.bd4fd390.js"><link rel="prefetch" href="/assets/js/43.dfa1fff4.js"><link rel="prefetch" href="/assets/js/44.b47f2cd3.js"><link rel="prefetch" href="/assets/js/45.152cfa89.js"><link rel="prefetch" href="/assets/js/46.38810469.js"><link rel="prefetch" href="/assets/js/47.0425c1ac.js"><link rel="prefetch" href="/assets/js/48.400df81a.js"><link rel="prefetch" href="/assets/js/49.1087a72d.js"><link rel="prefetch" href="/assets/js/5.6eff8140.js"><link rel="prefetch" href="/assets/js/50.a4862183.js"><link rel="prefetch" href="/assets/js/51.f1f09ee4.js"><link rel="prefetch" href="/assets/js/52.69043049.js"><link rel="prefetch" href="/assets/js/53.e6ed6e75.js"><link rel="prefetch" href="/assets/js/54.11f69a22.js"><link rel="prefetch" href="/assets/js/55.a83e95d3.js"><link rel="prefetch" href="/assets/js/57.20840695.js"><link rel="prefetch" href="/assets/js/58.109c2d36.js"><link rel="prefetch" href="/assets/js/59.425cc1ad.js"><link rel="prefetch" href="/assets/js/6.17d5dd20.js"><link rel="prefetch" href="/assets/js/60.a42ec1da.js"><link rel="prefetch" href="/assets/js/7.d21bddd9.js"><link rel="prefetch" href="/assets/js/8.e9dc6fe0.js"><link rel="prefetch" href="/assets/js/9.38902900.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Lawz's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/2021-06-10 js手写代码系列.html" class="nav-link">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识分类" class="dropdown-title"><span class="title">知识分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="知识分类" class="mobile-dropdown-title"><span class="title">知识分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cate/01-Html.html" class="nav-link">
  Html
</a></li><li class="dropdown-item"><!----> <a href="/cate/02-Css.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/cate/03-Js.html" class="nav-link">
  Js
</a></li><li class="dropdown-item"><!----> <a href="/cate/04-Browser.html" class="nav-link">
  Browser
</a></li><li class="dropdown-item"><!----> <a href="/cate/06-React.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/cate/07-Node.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/cate/08-RegEx.html" class="nav-link">
  RegEx
</a></li><li class="dropdown-item"><!----> <a href="/cate/09-IDE.html" class="nav-link">
  IDE
</a></li><li class="dropdown-item"><!----> <a href="/cate/10-算法.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/cate/11-Git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/cate/12-Nginx.html" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/cate/13-Typescript.html" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/cate/14-webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/cate/15-小程序.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/cate/16-Hybird.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Hybird
</a></li><li class="dropdown-item"><!----> <a href="/cate/17-安全.html" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/cate/18-面试.html" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/cate/19-网络.html" class="nav-link">
  网络
</a></li></ul></div></div><div class="nav-item"><a href="/book/2021-03-28 香帅财富报告.html" class="nav-link">
  阅读
</a></div><div class="nav-item"><a href="https://github.com/lawzheng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/2021-06-10 js手写代码系列.html" class="nav-link">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识分类" class="dropdown-title"><span class="title">知识分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="知识分类" class="mobile-dropdown-title"><span class="title">知识分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cate/01-Html.html" class="nav-link">
  Html
</a></li><li class="dropdown-item"><!----> <a href="/cate/02-Css.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/cate/03-Js.html" class="nav-link">
  Js
</a></li><li class="dropdown-item"><!----> <a href="/cate/04-Browser.html" class="nav-link">
  Browser
</a></li><li class="dropdown-item"><!----> <a href="/cate/06-React.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/cate/07-Node.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/cate/08-RegEx.html" class="nav-link">
  RegEx
</a></li><li class="dropdown-item"><!----> <a href="/cate/09-IDE.html" class="nav-link">
  IDE
</a></li><li class="dropdown-item"><!----> <a href="/cate/10-算法.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/cate/11-Git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/cate/12-Nginx.html" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/cate/13-Typescript.html" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/cate/14-webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/cate/15-小程序.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/cate/16-Hybird.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Hybird
</a></li><li class="dropdown-item"><!----> <a href="/cate/17-安全.html" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/cate/18-面试.html" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/cate/19-网络.html" class="nav-link">
  网络
</a></li></ul></div></div><div class="nav-item"><a href="/book/2021-03-28 香帅财富报告.html" class="nav-link">
  阅读
</a></div><div class="nav-item"><a href="https://github.com/lawzheng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>混合开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cate/16-Hybird.html#混合开发" class="sidebar-link">混合开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cate/16-Hybird.html#h5页面在ios机上禁止长按复制" class="sidebar-link">h5页面在ios机上禁止长按复制</a></li><li class="sidebar-sub-header"><a href="/cate/16-Hybird.html#ios禁止点击阴影" class="sidebar-link">ios禁止点击阴影</a></li><li class="sidebar-sub-header"><a href="/cate/16-Hybird.html#scrollto" class="sidebar-link">scrollTo</a></li><li class="sidebar-sub-header"><a href="/cate/16-Hybird.html#微信分享" class="sidebar-link">微信分享</a></li><li class="sidebar-sub-header"><a href="/cate/16-Hybird.html#touch事件触发微信下拉" class="sidebar-link">touch事件触发微信下拉</a></li><li class="sidebar-sub-header"><a href="/cate/16-Hybird.html#系统字体调大" class="sidebar-link">系统字体调大</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="混合开发"><a href="#混合开发" class="header-anchor">#</a> 混合开发</h2> <h4 id="字间距"><a href="#字间距" class="header-anchor">#</a> 字间距</h4> <p>字间距不能用padding来调，某些手机会出现字体被遮挡现象，得用line-height 1.5或其他不带单位这种</p> <h3 id="h5页面在ios机上禁止长按复制"><a href="#h5页面在ios机上禁止长按复制" class="header-anchor">#</a> h5页面在ios机上禁止长按复制</h3> <p>（注意，<strong>增加之后需要对input的另外设置，不然输入框无法输入</strong>）场景：H5出现一个按钮需要长按几秒展示动画的，如：skcs.net-tactic.com/wap/peace/index，这时就需要用到禁止苹果的</p> <p>ios机默认存在长按复制选择，用以下代码取消：</p> <div class="language- extra-class"><pre class="language-text"><code>*{

-webkit-touch-callout:none; /*系统默认菜单被禁用*/

-webkit-user-select:none; /*webkit浏览器*/

-khtml-user-select:none; /*早期浏览器*/

-moz-user-select:none;/*火狐*/

-ms-user-select:none; /*IE10*/

user-select:none;

}

 

但是以上代码也会禁止输入框的使用，可用以下代码解决：

input {

-webkit-user-select:auto; /*webkit浏览器*/

}

textarea {                                //如果存在textarea也输入不进文本的情况下，加上这个

-webkit-user-select:auto; /*webkit浏览器*/

}
</code></pre></div><h3 id="ios禁止点击阴影"><a href="#ios禁止点击阴影" class="header-anchor">#</a> ios禁止点击阴影</h3> <div class="language- extra-class"><pre class="language-text"><code>* {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    -webkit-tap-highlight-color:transparent;
}
</code></pre></div><h4 id="兼容苹果-键盘弹出错位"><a href="#兼容苹果-键盘弹出错位" class="header-anchor">#</a> 兼容苹果，键盘弹出错位</h4> <div class="language- extra-class"><pre class="language-text"><code>this.$refs.inputText.onblur = () =&gt; {
  console.log('失去焦点')
  window.scrollTo(0, 0)
}
</code></pre></div><h4 id="弹出键盘底部元素被顶起"><a href="#弹出键盘底部元素被顶起" class="header-anchor">#</a> 弹出键盘底部元素被顶起</h4> <div class="language- extra-class"><pre class="language-text"><code>data

docmHeight: document.documentElement.clientHeight, // 默认屏幕高度
showHeight: document.documentElement.clientHeight, // 实时屏幕高度
showBtn: true
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>mounted

window.onresize = () =&gt; {
  this.showHeight = document.body.clientHeight
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>watch: {
  showHeight (val) {
    this.showBtn = this.docmHeight &lt;= this.showHeight
  }
},
</code></pre></div><h4 id="ios键盘导致错位"><a href="#ios键盘导致错位" class="header-anchor">#</a> ios键盘导致错位</h4> <div class="language- extra-class"><pre class="language-text"><code>document.body.addEventListener('focusout', () =&gt; { // 监听焦点和失焦事件
  document.body.scrollTop = 0
})
window.addEventListener('resize', function () {
  if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {
    window.setTimeout(function () {
      document.activeElement.scrollIntoViewIfNeeded()
    }, 0)
  }
})
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>  this.$refs.post.scrollIntoView()
</code></pre></div><h4 id="禁止微信浏览器长按出菜单"><a href="#禁止微信浏览器长按出菜单" class="header-anchor">#</a> 禁止微信浏览器长按出菜单</h4> <div class="language- extra-class"><pre class="language-text"><code>._point-events-none {
  pointer-events:none;
}
</code></pre></div><h4 id="ios不支持date"><a href="#ios不支持date" class="header-anchor">#</a> ios不支持Date</h4> <p>2019-8-7这种  换成/就可以</p> <div class="language- extra-class"><pre class="language-text"><code>兼容ios的时间转换方法
return new Date(dateString.replace(/-/g, '/'))
</code></pre></div><h4 id="统一处理键盘弹起收回事件"><a href="#统一处理键盘弹起收回事件" class="header-anchor">#</a> 统一处理键盘弹起收回事件</h4> <div class="language- extra-class"><pre class="language-text"><code>/**
 * 统一处理兼容键盘弹起收回事件
 * 安卓输入框不滚到视线内
 * 苹果收起时页面不复原
 * 2019/12/10 lz
 */
processInput () {
  if (this.isIOS) {
    document.body.addEventListener('focusout', () =&gt; {
      const scrollHeight = document.documentElement.scrollTop || document.body.scrollTop || 0
      window.scrollTo(0, Math.max(scrollHeight - 1, 0))
    })
  }
  if (this.isAndroid) {
    window.addEventListener('resize', function () {
      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {
        setTimeout(function () {
          document.activeElement.scrollIntoViewIfNeeded()
          document.activeElement.scrollIntoView()
        }, 100)
      }
    })
  }
},
</code></pre></div><h3 id="scrollto"><a href="#scrollto" class="header-anchor">#</a> scrollTo</h3> <p>scrollTo在某些环境会报错</p> <div class="language- extra-class"><pre class="language-text"><code>not a function
</code></pre></div><p>可以使用scrollTop、scrollLeft替代</p> <h3 id="微信分享"><a href="#微信分享" class="header-anchor">#</a> 微信分享</h3> <p>文档地址</p> <p>https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html</p> <p>隐藏，在路由router.beforeEach中修改</p> <div class="language- extra-class"><pre class="language-text"><code>/**
 * 页面未加载完成时隐藏微信分享
 */
const hideWxShare = () =&gt; {
  if (_this.isWx) {
    let hrefString = location.href
    let data = {
      method: 'common_common_getSignPackage',
      url: hrefString
    }
    const Wx = window.jWeixin
    _this.$axios.post('baseApiEntry', data).then(res =&gt; {
      Wx.config({
        // debug: true,
        appId: res.appId,
        nonceStr: res.nonceStr,
        timestamp: res.timestamp,
        signature: res.signature,
        jsApiList: ['hideMenuItems']
      })
      Wx.ready(() =&gt; {
        Wx.hideMenuItems({
          menuList: [
            'menuItem:share:appMessage',
            'menuItem:share:timeline',
            'menuItem:share:qq',
            'menuItem:share:weiboApp',
            'menuItem:share:favorite',
            'menuItem:share:facebook',
            'menuItem:share:QZone'
          ]
        })
      })
    })
  }
}
</code></pre></div><p>显示</p> <p>同上，方法名改为<code>showMenuItems</code>即可</p> <h3 id="touch事件触发微信下拉"><a href="#touch事件触发微信下拉" class="header-anchor">#</a> touch事件触发微信下拉</h3> <div class="language- extra-class"><pre class="language-text"><code>touchmove事件里阻止默认事件
e.preventDefault()
</code></pre></div><h3 id="系统字体调大"><a href="#系统字体调大" class="header-anchor">#</a> 系统字体调大</h3> <h4 id="方案一-【h5解决】"><a href="#方案一-【h5解决】" class="header-anchor">#</a> 方案一：【h5解决】</h4> <p>需要在设置完字体大小之后，再去重新获取一下html的font-size，这样就可以实现当实际的值与我们设置的值不一样时，根据比例再设置一次。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">htmlFontSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> h <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> w <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> width <span class="token operator">=</span> w <span class="token operator">&gt;</span> h <span class="token operator">?</span> h <span class="token operator">:</span> w<span class="token punctuation">;</span>
    width <span class="token operator">=</span> width <span class="token operator">&gt;</span> <span class="token number">720</span> <span class="token operator">?</span> <span class="token number">720</span> <span class="token operator">:</span> width
    <span class="token keyword">var</span> fz <span class="token operator">=</span> <span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span>width<span class="token operator">*</span><span class="token number">100000</span><span class="token operator">/</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">10000</span>
    document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">'font-size: '</span> <span class="token operator">+</span> fz <span class="token operator">+</span><span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> realfz <span class="token operator">=</span> <span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token operator">+</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fontSize<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'px'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">10000</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fz <span class="token operator">!==</span> realfz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">'font-size: '</span> <span class="token operator">+</span> fz <span class="token operator">*</span> <span class="token punctuation">(</span>fz <span class="token operator">/</span> realfz<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="方案二-【客户端解决】"><a href="#方案二-【客户端解决】" class="header-anchor">#</a> 方案二：【客户端解决】</h4> <p>iOS
在iPhone系统设置中的“更大字体”里调整字号后，各个应用里中Webview里的文字大小似乎没有受到影响。但是对于诸如微信、UC浏览器等可以在APP里设置网页字体大小的应用，还是有限制调整字号的需求的。它们调整字体大小是通过给body设置-webkit-text-size-adjust属性实现的，因此只要限制这个属性不被修改即可：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">-webkit-text-size-adjust</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Android
如果是在自己开发的APP中，可以在客户端的WebView组件中设置字体默认的缩放比例，以避免手机系统的字体修改对页面字体及布局造成影响。</p> <div class="language-undefined extra-class"><pre class="language-text"><code>WebSettings settings = webView.getSettings();
settings.setTextZoom(100);
</code></pre></div><h4 id="单纯微信"><a href="#单纯微信" class="header-anchor">#</a> 单纯微信</h4> <div class="language- extra-class"><pre class="language-text"><code>if (typeof WeixinJSBridge === 'object' &amp;&amp; typeof WeixinJSBridge.invoke === 'function') {
  handleFontSize()
} else {
  document.addEventListener('WeixinJSBridgeReady', handleFontSize, false)
}
function handleFontSize () {
  // 设置网页字体为默认大小
  WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize': 0 })
  // 重写设置网页字体大小的事件
  WeixinJSBridge.on('menu:setfont', function () {
    WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize': 0 })
  })
}
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b7be68ba.js" defer></script><script src="/assets/js/2.dd75d9b8.js" defer></script><script src="/assets/js/56.60536a01.js" defer></script>
  </body>
</html>
