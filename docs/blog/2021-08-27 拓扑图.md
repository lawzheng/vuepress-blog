# 拓扑图创新

随着业务的迅速发展，以前控制器中使用`D3.js`实现的拓扑图功能渐渐地不能满足需求：

1. 代码组织混乱，各功能未有序解耦，维护困难。
2. 未插件化，不能供多个项目使用。
3. `D3.js`使用`svg`来实现，在数据量大时需要生成数量庞大的`dom`结构。

因此，拓扑图急需一次大的升级。



## 插件选型

市面上有不少拓扑图插件，例如：

### 1. AntV G6

简介：G6 是一个图可视化引擎。它提供了图的绘制、布局、分析、交互、动画等图可视化的基础能力。
背景：蚂蚁金服 AntV、国产
官网：https://antv.vision/zh
示例：https://github.com/wenyuan/cceditor

- 优点
  - 开源免费
  - 上手简单，可扩展性强
  - 功能丰富，支持各种自定义操作
  - 由蚂蚁金服 AntV 团队开发，从维护性和生态圈角度考虑相对有保障
  - 支持自动布局（早期借助 d3-force 实现，后期已经被内部支持）
- 缺点
  - 有时候文档和版本会脱节（可以理解，问题不大）
- 建议
  - 大厂团队开发维护，后期有保障，大小项目都可以使用
  - 可以学习里面的一些编程思想和技巧



### 2. D3

只提供画图能力，画什么需要自己实现。



### 3. ECharts

简介：ECharts 关系图。
背景：百度、国产
官网：https://www.echartsjs.com/zh/index.html

- 优点
  - 上手非常简单
  - 文档齐全
- 缺点
  - 扩展性弱（毕竟不是专做图编辑器的，关系图只是 ECharts 中的一项）
- 建议
  - 可以用在定制化的需求中，不需要拖拉拽等功能



### 选型总结

除了上面提到的，还有一些国内外个人开发的插件，但普遍存在维护无保障、文档不齐全等问题。

另外D3之前就在用，存在的问题上面也讲过了。

Echarts拓展性不强，无法适应多变的需求。

加上深信服已经有基于`G6.js`封装了插件，可以在其基础上快速实现功能，于是最终选定使用`G6`进行开发。





## 功能实现





## 组件封装





## 扩展性



## 兼容性



